# Complete TSP Research Experiment Configuration
# This template demonstrates end-to-end pipeline configuration

experiment:
  name: "baseline_comparison_v1"
  description: "Compare anchor-based heuristics to nearest neighbor baseline across multiple graph types"
  random_seed: 42
  output_dir: "experiments/baseline_v1"

# Phase 1: Graph Generation
graph_generation:
  enabled: true
  batch_name: "baseline_graphs_001"
  types:
    # Euclidean graphs (2D geometric)
    - type: "euclidean"
      sizes: [20, 50, 100]
      instances_per_size: 10
      dimension: 2
      weight_range: [1.0, 100.0]

    # Metric graphs (satisfy triangle inequality)
    - type: "metric"
      sizes: [50, 100]
      instances_per_size: 5
      strategy: "completion"  # or "mst"
      weight_range: [10.0, 50.0]

    # Random graphs (no constraints)
    - type: "random"
      sizes: [20, 50]
      instances_per_size: 5
      weight_range: [1.0, 100.0]

# Phase 2: Algorithm Benchmarking
benchmarking:
  enabled: true
  algorithms:
    # Baseline algorithms
    - name: "nearest_neighbor"
      params:
        strategy: "best_start"  # Try all starting vertices

    - name: "greedy_edge"
      params: {}

    # Anchor-based heuristics
    - name: "single_anchor"
      params:
        bidirectional: true  # Use v2 (bidirectional)

    - name: "best_anchor"
      params: {}

  # Test all possible anchors for label generation
  exhaustive_anchors: true
  timeout_seconds: 300
  storage_format: "sqlite"

# Phase 3: Feature Extraction
feature_extraction:
  enabled: true
  extractors:
    - weight_based      # 20-46 features (symmetric/asymmetric)
    - topological       # ~15 features (centrality, clustering)
    - mst_based         # ~10 features (MST structure)
    - neighborhood      # ~31 features (k-NN, density, Voronoi)
    # - heuristic       # Optional: 15 features (tour estimates)
    # - graph_context   # Optional: 12 features (graph-level properties)

  # Anchor quality labeling strategy
  labeling_strategy: "rank_based"  # Options: rank_based, absolute, binary, multiclass, relative

  labeling_params:
    percentile_top: 20    # Top 20% vertices are "good" anchors
    percentile_bottom: 20 # Bottom 20% are "bad" anchors
    # (middle 60% are "average")

  output_format: "csv"  # or "pickle"

# Phase 4: Machine Learning Training
training:
  enabled: true
  models:
    # Linear models (interpretable)
    - type: "linear_ridge"
      alpha: 1.0

    - type: "linear_lasso"
      alpha: 0.1

    # Tree-based models (comparison)
    - type: "random_forest"
      n_estimators: 100
      max_depth: 10
      random_state: 42

  problem_type: "regression"  # Options: regression, classification, ranking
  test_split: 0.2
  stratify_by: "graph_type"  # Ensure balanced graph types in train/test

  cross_validation:
    enabled: false  # Set to true for hyperparameter tuning
    n_folds: 5
    strategy: "stratified"  # Options: kfold, stratified, group

# Phase 5: Model Evaluation
evaluation:
  enabled: true

  # Algorithms to test with ML predictions
  test_algorithms:
    - name: "single_anchor"
      anchor_source: "ml_prediction"

  # Baseline comparisons
  baseline_algorithms:
    - name: "single_anchor"
      anchor_source: "random"

    - name: "nearest_neighbor"
      anchor_source: null  # Not anchor-based

  metrics:
    - tour_weight
    - runtime
    - improvement_vs_baseline

# Phase 6: Analysis and Reporting
analysis:
  enabled: true

  # Generate test results summary (success/failure, observations)
  generate_test_summary: true

  # Statistical hypothesis testing
  statistical_tests:
    - paired_t_test
    - wilcoxon

  # Publication-quality visualizations
  visualizations:
    - algorithm_comparison_boxplot
    - feature_importance_barplot
    - predicted_vs_actual_scatter
    - performance_by_graph_type
    - interaction_heatmap

  report_format: "markdown"  # Options: markdown, html, pdf
  publication_quality: true  # Use high-DPI, colorblind-friendly palettes

# Pipeline Configuration
pipeline:
  parallel_execution: false  # Set to true for multi-core execution
  max_workers: 4            # Number of parallel workers (if enabled)
  checkpoint_frequency: "per_stage"  # Save after each stage completes
  error_handling: "continue"  # Options: fail_fast, continue, retry
  logging_level: "INFO"  # Options: DEBUG, INFO, WARNING, ERROR
